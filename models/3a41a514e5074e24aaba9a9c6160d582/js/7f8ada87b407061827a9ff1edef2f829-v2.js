"use strict";(self.webpackChunksketchfab=self.webpackChunksketchfab||[]).push([[7386],{pgZm:(e,n,r)=>{r.d(n,{Qs:()=>i,WQ:()=>a,_f:()=>c,oF:()=>o});var t=["spectator","contributor","project_lead","admin"];function o(e,n){return t.indexOf(e)>=t.indexOf(n)}function a(e){return o(e,"contributor")}var i=function(e,n){return e.slug?["orgs:project",{username:e.org.username,slug:e.slug,uid:e.uid},n]:["orgs:project_without_slug",{username:e.org.username,uid:e.uid},n]},c=function(e){return 0===e.depth}},gmGo:(e,n,r)=>{r.d(n,{Z:()=>d});var t=r("D4hk"),o=r("sQwH"),a=r("3MRe"),i=r("3Z9q"),c=r("X40V"),u=r("V4X4"),s=r("BujJ"),l=["className","placeholder","maxLength"];function d(e){var n=e.className,r=e.placeholder,d=e.maxLength,f=void 0===d?120:d,Z=(0,a.Z)(e,l);return(0,o.Z)("div",{className:(0,c.AK)("c-search-input",s.Z.view,n)},void 0,(0,o.Z)("i",{"aria-hidden":"true",className:(0,c.AK)("fa-regular fa-search",s.Z.icon)}),i.createElement(u.Z,(0,t.Z)({"data-selenium":"search-input",type:"text",name:"query",autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",className:s.Z.input,maxLength:f,placeholder:r,"aria-label":r},Z)))}},"2bV5":(e,n,r)=>{r.d(n,{Q:()=>a});var t=r("3Z9q"),o=r("e1Pq"),a=function(e,n){var r=(0,o.Z)().Popups;return t.useCallback((function(){return r.loadCreateProjectPopup().then((function(r){return new r({orgUid:e,onProjectCreated:n}).open()}))}),[e,n,r])}},V29b:(e,n,r)=>{r.d(n,{Z:()=>c});var t=r("3Z9q"),o=r("+zma"),a=r("VDcQ"),i=r("ajs0");const c=function(){var e=(0,a.v9)(o.wl.authUser.user),n=(0,i.Z)((function(e,n){return e.Api.getCurrentUserMemberships(n)}),[e.uid]);return t.useEffect((function(){n.onLoadFirst()}),[e.uid]),n}},UzvP:(e,n,r)=>{r.d(n,{Z:()=>u});var t=r("Wch8"),o=r("y+4b"),a=r.n(o),i=r("3Z9q"),c=r("ajs0");const u=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=(0,c.Z)(function(){var r=(0,t.Z)(a().mark((function r(t,o){var i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=t.Api,r.abrupt("return",i.searchOrgProjects(e,{q:n,cursor:o}));case 2:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}(),[e,n]);return i.useEffect((function(){e&&r.onLoadFirst()}),[e,n]),r}},hk5G:(e,n,r)=>{r.d(n,{Z:()=>f});var t=r("7isf"),o=r("lrhy"),a=r("3Z9q"),i=r("HPk7"),c=r("Cgfs"),u=r("pLUK"),s=r("Oyie"),l=function(e){return e===window?window.scrollY:e.scrollTop},d=function(e){return e===window?document.documentElement.scrollHeight:e.scrollHeight};const f=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window,Z=a.useRef(1/0),v=(0,u.Z)(a.useCallback((function(){return l(f)>Z.current?n().then((function(){return(0,o.gw)(300)})):s.resolve()}),[f].concat((0,t.Z)(r))));a.useEffect((function(){if(f){var e=(0,i.Z)(v,200);return f.addEventListener("scroll",e,{passive:!0}),function(){f.removeEventListener("scroll",e)}}}),[f,v]);var m=a.useMemo((function(){return(0,c.Z)((function(){if(e.current){var n=f?d(f):0,r=n-(e.current.offsetTop+e.current.offsetHeight);Z.current=n-(r+2*window.innerHeight)}}),100)}),[f,e]);a.useEffect((function(){return m(),window.addEventListener("resize",m),function(){return window.removeEventListener("resize",m)}}))}},e1Pq:(e,n,r)=>{r.d(n,{Z:()=>a});var t=r("3Z9q"),o=r("HGbS");function a(){return t.useContext(o.N1)}},FbSi:(e,n,r)=>{r.d(n,{Z:()=>u});var t=r("sGMM"),o=r("3Z9q"),a=r("VDcQ"),i=r("+zma"),c=r("e1Pq");const u=function(e){var n=(0,c.Z)().Api,r=(0,a.v9)(i.wl.authUser.getOrgRole(e)).caseOf({None:function(){},Some:function(e){return e}}),u=o.useState("spectator"),s=(0,t.Z)(u,2),l=s[0],d=s[1];return o.useEffect((function(){e&&(r?d(r):n.getCurrentUserOrgMember(e).then((function(e){return d(e.role)})))}),[n,r,e,l]),l}},kN3w:(e,n,r)=>{r.d(n,{Z:()=>L});var t,o,a,i=r("xKIK"),c=r("7isf"),u=r("sGMM"),s=r("sQwH"),l=r("3Z9q"),d=r("VDcQ"),f=r("+zma"),Z=r("X40V"),v=r("pgZm"),m=r("6tbf"),h=r("UnUI"),p=r("2bV5"),g=r("hk5G"),w=r("ajs0"),N=r("FbSi"),b=r("ZzQX"),j=r("Oyie"),C=function(e){var n=e.project;return(0,v._f)(n)?(0,s.Z)(m.Z,{alt:"Thumbnail of a model in the project ".concat(n.name),thumbnails:n.thumbnails[0],deferImages:!0,width:24,height:24,className:b.Z["project-icon"]}):(0,s.Z)("div",{className:b.Z.icon},void 0,t||(t=(0,s.Z)("i",{className:"fa-regular fa-folder-open"})))},k=function(e){var n=e.orgUid,r=e.onChange,t=e.value,m=e.onNavigate,h=l.useRef(null),k=l.useState([]),L=(0,u.Z)(k,2),A=L[0],q=L[1],E=A[A.length-1],P=(0,w.Z)((function(e,r){var t=e.Api,o=E?E.uid:void 0;return t.searchOrgProjects(n,{cursor:r,parent:o})}),[null==E?void 0:E.uid]);l.useEffect((function(){P.onLoadFirst()}),[null==E?void 0:E.uid]);var U=l.useCallback((function(){return P.hasNextPage?P.onLoadNext():j.resolve()}),[P]);(0,g.Z)(h,U,[U],h.current);var x=function(e){r(e)},K=(0,d.v9)(f.wl.authUser.user),V=(0,N.Z)(n),Q=K.isStaff||"admin"===V,S=(0,p.Q)(n,(function(){return P.onLoadFirst()}));return(0,s.Z)("div",{className:b.Z.view},void 0,l.createElement("div",{className:(0,Z.AK)(b.Z.main,(0,i.Z)({},(0,Z.c6)(b.Z,"loading"),P.isLoading)),ref:h},P.list.length>0?(0,s.Z)(l.Fragment,{},void 0,(0,s.Z)("div",{className:(0,Z.AK)(b.Z["back-header"],(0,i.Z)({},(0,Z.c6)(b.Z,"hidden"),0===A.length)),onClick:function(){q(A.slice(0,A.length-1))}},void 0,o||(o=(0,s.Z)("span",{className:"fa-regular fa-chevron-left"})),"Choose a folder"),E?(0,s.Z)("div",{className:(0,Z.AK)(b.Z["project-item"],b.Z["project-header"],(0,i.Z)({},(0,Z.c6)(b.Z,"selected"),E.uid===(null==t?void 0:t.uid))),onClick:function(){return x(E)}},void 0,(0,s.Z)(C,{project:E}),(0,s.Z)("div",{className:b.Z["project-name"]},void 0,E.name)):null,P.list.map((function(e){var n;return(0,s.Z)("div",{className:(0,Z.AK)(b.Z["project-item"],(n={},(0,i.Z)(n,(0,Z.c6)(b.Z,"selected"),e.uid===(null==t?void 0:t.uid)),(0,i.Z)(n,(0,Z.c6)(b.Z,"folder"),!(0,v._f)(e)),n))},e.uid,(0,s.Z)("div",{className:b.Z["project-info"],onClick:function(){return x(e)}},void 0,(0,v._f)(e)?(0,s.Z)(C,{project:e}):null,(0,s.Z)("div",{className:b.Z["project-name"]},void 0,e.name)),e.folderCount>0?(0,s.Z)("div",{className:(0,Z.AK)(b.Z.chevron,"fa-regular fa-chevron-right"),onClick:function(){return function(e){q([].concat((0,c.Z)(A),[e])),m&&m()}(e)}}):null)}))):(0,s.Z)("div",{className:b.Z.emptyState},void 0,"There is no project available.",a||(a=(0,s.Z)("br",{})),Q?(0,s.Z)("span",{className:b.Z.newProject,onClick:S},void 0,"Create a new project."):"Ask your organization admin to create a project.")),(0,s.Z)("div",{className:b.Z.footer}))};const L=function(e){var n=e.orgUid,r=e.onChange,t=e.value,o=e.className,a=void 0===o?"":o,i=e.disabled,c=(0,l.useState)(!1),d=(0,u.Z)(c,2),f=d[0],v=d[1];return(0,s.Z)(h.Z,{labelValue:t?t.name:"Select a project or folder",className:(0,Z.AK)(b.Z["folder-dropdown"],a),disabled:i,onClose:function(){if(f)return v(!1),!1}},void 0,(function(e){return(0,s.Z)(k,{orgUid:n,value:t,onNavigate:function(){return v(!0)},onChange:function(n){v(!1),r(n),e.onToggle()}})}))}},mwAa:(e,n,r)=>{r.d(n,{U_:()=>c});var t=r("D4hk"),o=r("3Z9q"),a=r("X40V"),i=r("GR31"),c=(r("gmGo"),function(e){var n=e.pagination,r=e.className;return o.createElement(i.Z,(0,t.Z)({className:(0,a.AK)("c-project-select__dropdown --paginated",r),onBottomReached:function(){n.hasNextPage&&!n.isLoading&&n.onLoadNext()}},e))})}}]);