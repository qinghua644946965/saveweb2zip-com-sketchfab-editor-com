"use strict";(self.webpackChunksketchfab=self.webpackChunksketchfab||[]).push([[507],{k3DV:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n("3Z9q"),i=n("VDcQ"),s=n("Bpah"),o=n("fBod"),r=n("+zma"),l=n("Oyie");function d(e){var t=(0,i.v9)(r.wl.authUser.canAccessFeature("ff_read_only_mode"));return a.useCallback((function(){return t?((0,o.openMaintenancePopup)("Sketchfab is undergoing maintenance. Deleting models is currently disabled."),l.reject(new Error)):(0,o.loadDeletePopup)().then((function(t){return new t({model:new s.Z(e)}).promise}))}),[e,t])}},RI22:(e,t,n)=>{n.d(t,{U:()=>b});var a,i,s,o=n("sQwH"),r=n("xKIK"),l=n("3Z9q"),d=n("Yxa5"),c=n("X40V"),u=n("KUFO"),p=n("vAnt"),m=n("Di7Z"),v=n("EA64"),Z=n("n0CI"),f={Pending:"pending",Processing:"pending",Failed:"error"},g=function(e,t){return e[t.type].label},h=function(e,t){return e[t.type].description},b=function(e){var t=e.archives,n=e.model,b=e.withTitle,w=void 0===b||b,N=e.withBorder,y=void 0===N||N,k=function(e){return{source:{label:e.ext?".".concat(e.ext):"Original format",description:e.ext?"(Original format)":""},gltf:{label:".gltf",description:"(Converted)"},usdz:{label:".usdz",description:"(Converted)"},uasset:{label:".uasset",description:"(Converted)"}}}(n),C=(0,v.O)(t);return(0,o.Z)("div",{className:(0,c.AK)(Z.Z.view,(0,r.Z)({},(0,c.c6)(Z.Z,"with-border"),y))},void 0,w&&(0,o.Z)("p",{className:Z.Z.title},void 0,"Download your model"),(0,o.Z)("div",{className:Z.Z.contents},void 0,n.isPublished?C.map((function(e,t){return(0,o.Z)(l.Fragment,{},t,(0,o.Z)("div",{className:Z.Z.option},void 0,(0,o.Z)("div",{className:Z.Z.type},void 0,(0,o.Z)("span",{className:Z.Z.label},void 0,g(k,e)," "),(0,o.Z)("span",{className:Z.Z.description},void 0,h(k,e))),(0,o.Z)("div",{className:Z.Z.status},void 0,e.exists&&e.status?"Succeeded"===e.status?(0,o.Z)(p.Z,{text:"Download",size:"small",type:"primary",onClick:function(){return d.Z.poll(e.url).then((function(e){var t=e.url;window.location.href=t})).catch((function(e){console.error(e)}))}}):(0,o.Z)(l.Fragment,{},void 0,(0,o.Z)(u.Z,{type:f["".concat(e.status)],label:"Pending"===e.status||"Processing"===e.status?"source"===e.type?"Zipping...":"Converting...":"Conversion failed"}),"Failed"===e.status?(0,o.Z)(m.D,{className:Z.Z.report,model:n}):null):(0,o.Z)(u.Z,{type:"informative",label:"unavailable",rightIcon:{classname:"fa-regular fa-question-circle",message:"Model is not compatible with ".concat(k[e.type].label," feature or conversion has not started yet"),messagePosition:"up-left"}}))))})):t.map((function(e,t){return(0,o.Z)(l.Fragment,{},t,(0,o.Z)("div",{className:Z.Z.option},void 0,(0,o.Z)("div",{className:Z.Z.type},void 0,(0,o.Z)("span",{className:Z.Z.label},void 0,g(k,e)," "),(0,o.Z)("span",{className:Z.Z.description},void 0,h(k,e))),(0,o.Z)("div",{className:Z.Z.status},void 0,n.org?a||(a=(0,o.Z)(u.Z,{type:"pending",label:"processing"})):i||(i=(0,o.Z)(u.Z,{type:"inactive",label:"waiting for publish"})))))}))),n.isPublished?(0,o.Z)("div",{className:Z.Z.tips},void 0,s||(s=(0,o.Z)("p",{},void 0,"Changing 3D settings will re-run conversion"))):null)}},Di7Z:(e,t,n)=>{n.d(t,{D:()=>f,m:()=>Z});var a,i=n("sQwH"),s=n("3Z9q"),o=n("Bpah"),r=n("e1Pq"),l=n("k3DV"),d=n("WA+4"),c=n("LLYa"),u=n("fBod"),p=n("VDcQ"),m=n("+zma"),v=n("4sJl");function Z(e){var t=e.model,n=e.authUser,Z=e.className,f=(0,r.Z)().History,g=(0,p.I0)(),h=(0,l.Z)(t),b=s.useCallback((function(){(0,u.loadReportPopup)().then((function(e){new e({model:new o.Z(t)})}))}),[t]),w=!!(0,c.aI)(t)&&(0,c.$y)(t),N=(0,p.v9)(m.wl.authUser.getOrgRole(t.org?t.org.uid:"")),y=(0,d.w)(t,"org")?(0,v.Bl)(t,n,N):t.user.uid===n.uid||n.isStaff;return(0,i.Z)("div",{className:Z},void 0,w||!y?null:(0,i.Z)("div",{className:"c-model-properties__link-container"},void 0,(0,i.Z)("a",{className:"c-model-properties__delete cell","data-selenium":"delete-model",onClick:function(){return h().then((function(){t.org?(g(m.Nw.orgSearch.deleteModel(t.uid)),g(m.Nw.orgProjectSearch.deleteModel(t.uid)),f.pushRoute("orgs:all_models",{username:t.org.username})):f.pushRoute("users:profile_models",{username:n.username})}))}},void 0,"Delete this model")),(0,i.Z)("div",{className:"c-model-properties__link-container"},void 0,(0,i.Z)("a",{className:"c-model-properties__report cell skfb-link",onClick:b},void 0,a||(a=(0,i.Z)("i",{className:"icon fa-regular fa-flag"}))," Report an issue")))}var f=function(e){var t=e.model,n=e.className,a=s.useCallback((function(){(0,u.loadReportPopup)().then((function(e){new e({model:new o.Z(t)})}))}),[t]);return(0,i.Z)("div",{className:n},void 0,(0,i.Z)("a",{className:"skfb-link",onClick:a},void 0,"Report the issue"))}},EA64:(e,t,n)=>{n.d(t,{F:()=>s,O:()=>o});var a=n("p5Lb"),i=n("X40V"),s=function(e,t,n,s,o){return{text:s.hasSucceeded?t:s.isSubmitting?"uploading"===o.type?"Upload in progress...":n:e,subtext:s.isSubmitting?(r=o,"uploading"===r.type?"".concat(Math.round(r.loaded/r.total*100),"% — ").concat((0,a.$B)(r.loaded,!0)," / ").concat((0,a.$B)(r.total,!0)):""):"",loading:s.isSubmitting,success:s.hasSucceeded,progress:"uploading"===o.type?o.loaded/o.total:void 0,disabled:s.hasErrors||s.isSubmitting,style:!s.isSubmitting&&s.hasSucceeded?{backgroundColor:i.O9["--color-success-300"],opacity:1,cursor:"default",pointerEvents:"none"}:{}};var r},o=function(e){var t=e.find((function(e){return"gltf"===e.type}));if(t&&t.exists&&("Processing"===t.status||"Pending"===t.status)){var n=e.find((function(e){return"usdz"===e.type}));n&&(n.status="Pending",n.exists=!0)}return e}}}]);